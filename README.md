# comptech_team_1

## Цель первой задачи 

Спрогнозировать количество заказов по часам на 7 дней вперед. 
Выбрали модель Light GBM.


## Структура репозитория

```
|    ├── config
|       └── config.yaml -- Конфигурационный файл
|    ├── data
|       ├── X_test_base_normalized.csv -- Тестовые данные после нормализации
|       ├── X_train_base_normalized.csv -- Тренировочные данные после нормализации
|       ├── X_val_base_normalized.csv -- Валидационные данные после нормализации
|       ├── calendar_2021.json -- Нерабочие и праздничные дни 2021 
|       ├── orders.csv -- Исходные данные о количестве заказов
|       ├── partners_delays.csv -- Исходные данные об опозданиях курьеров
|    ├── models
|       └── lgbm_model_1.pkl -- Сериализованная обученная модель
|    ├── notebooks
|       ├── comptech_prophet.ipynb -- Эксперименты с моделью Prophet
|       ├── test_scripts.ipynb -- Тесты для функций извлечения признаков
|       └── сomptech_lgbm.ipynb -- Эксперименты с моделями LightGBM
|    ├── src
|       ├── eda_scripts.py -- Функции для извлечения признаков
|       ├── inference.py -- Функции для предсказания
|       ├── lgbm_model.py -- Класс модели
|       ├── preprocessing.py -- Функции для предобработки данных
|       └── utils.py -- Вспомогательные функции
|    ├── main.py -- Скрипт для запуска пайплайна инференса
│    └──  requirements.txt -- Файл зависимостей 
```

## Запуск пайплайна предсказания

Для запуска модуля необходимо запустить команду установки зависимостей из корня проекта:

`pip install -r requirements.txt`

Затем запустить из терминала основной скрипт `main.py`, при необходимости скорректировав параметры работы пайплайна в файле `config/config.yaml`


## Результат

После выполнения скрипта main.py создается файл с прогнозными данными с именем ________

Метрика - **MAPE** (Mean absolute percentage error)

Значения моделей для валидационной / тестовой выборок:

|Days         |LGBMWeekModelTopFeatures | LGBMWeekModel |
|-------------|-------------------------|---------------|
|1            |    0.224 / 0.216        | 0.229 / 0.201 |   
|2            |    0.230 / 1.560        | 0.223 / 1.630 |
|3            |    0.223 / 2.914        | 0.236 / 2.940 |
|4            |    0.302 / 4.082        | 0.281 / 4.532 |
|5            |    0.254 / 4.971        | 0.303 / 6.229 |
|6            |    0.283 / 5.929        | 0.263 / 7.088 |
|7            |    0.250 / 7.235        | 0.275 / 8.385 |
 
 
## Команда

- Мельникова Маргарита - Data Scientist
- Желтова Кристина - ML Engineer
- Сарыглар Орлан - технический писатель
